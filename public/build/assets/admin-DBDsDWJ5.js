class r{constructor(){this.init()}init(){this.bindEvents(),this.updateStats()}bindEvents(){document.addEventListener("click",t=>{const e=t.target.closest("button[data-modal]");if(e){t.preventDefault();const o=e.getAttribute("data-modal");this.openModal(o)}}),document.addEventListener("click",t=>{const e=document.querySelector(".user-dropdown");t.target.closest(".user-dropdown")?e&&e.classList.toggle("active"):e&&e.classList.remove("active")}),document.addEventListener("click",t=>{t.target.classList.contains("modal")&&t.target.classList.remove("active")}),document.addEventListener("click",t=>{t.target.closest(".logout-btn")&&(confirm("Are you sure you want to log out?")||t.preventDefault())}),document.querySelectorAll("form").forEach(t=>{t.addEventListener("submit",this.handleFormSubmit.bind(this))}),setInterval(()=>this.updateStats(),3e4)}handleFormSubmit(t){console.log("Form being submitted:",t.target)}openModal(t){console.log("Opening modal:",t);const e=document.getElementById(t);e?e.classList.add("active"):console.error("Modal not found:",t)}closeModal(t){console.log("Closing modal:",t);const e=document.getElementById(t);e&&e.classList.remove("active")}updateStats(){!window.location.pathname.includes("/admin")||window.location.pathname.includes("/users")||window.location.pathname.includes("/products")||fetch("/admin/dashboard/stats").then(t=>t.json()).then(t=>{const e=document.querySelectorAll(".stat-card");if(e.length>=6&&t){const o=e[0].querySelector(".stat-number");o&&t.total_users!==void 0&&(o.textContent=t.total_users.toLocaleString());const n=e[1].querySelector(".stat-number");n&&t.total_categories!==void 0&&(n.textContent=t.total_categories.toLocaleString());const a=e[2].querySelector(".stat-number");a&&t.total_products!==void 0&&(a.textContent=t.total_products.toLocaleString());const c=e[3].querySelector(".stat-number");c&&t.total_orders!==void 0&&(c.textContent=t.total_orders.toLocaleString());const l=e[4].querySelector(".stat-number");l&&t.total_feedbacks!==void 0&&(l.textContent=t.total_feedbacks.toLocaleString())}}).catch(t=>{console.log("Stats update failed:",t),document.querySelectorAll(".stat-number").forEach(o=>{const n=parseInt(o.textContent.replace(/,/g,""));if(!isNaN(n)){const a=Math.floor(Math.random()*3)-1,c=Math.max(0,n+a);o.textContent=c.toLocaleString()}})})}logout(){console.log("Logout method called")}}function i(s){console.log("Language selected:",s)}document.addEventListener("DOMContentLoaded",()=>{document.querySelectorAll(".lang-option").forEach(s=>{s.addEventListener("click",t=>{t.preventDefault();const e=t.target.closest(".lang-option").getAttribute("data-lang");i(e)})}),window.adminPanel=new r});
